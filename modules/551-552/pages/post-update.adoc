:551-552:

//tag::noattr[]
= Действия после установки обновления

ifndef::551-552[]
NOTE: Данные действия выполняются при обновлении с {dv} версии 5.5.1.
endif::551-552[]

[#scripts]
== Обновление скриптов, напрямую работающих с БД

В версии модуля {pl} 5.5.2 изменился способ хранения расширенных метаданных в БД: теперь данные хранятся в основных таблицах секций, а не в отдельных *extended*-таблицах. При обновлении системы стандартным образом все существующие данные из *extended*-таблиц будут перенесены в основные таблицы секций, а сами *extended*-таблицы переименованы в `dvtable_\{ID-секции}_extended_old_data`.

После обновления системы необходимо изменить код скриптов, напрямую обращающихся к *extended*-таблицам в БД, если такие функции были реализованы в Решении, например, для расчёта ролевой модели безопасности. К примеру, если существующий скрипт содержал обращение к таблице `dvtable_\{3997861d-4ff5-496a-b8a2-d16617de91d7}_extended`, теперь нужно обращаться к таблице `dvtable_\{3997861d-4ff5-496a-b8a2-d16617de91d7}`.

NOTE: Данное изменение не затрагивает динамические метаданные. Скрипты, работающие с таблицами динамических секций и полей, изменять *не нужно*.

[#logs]
== Перенос журналов в сателлитную БД

В версии модуля {pl} 5.5.2 была упразднена функция архивирования журналов работы, с помощью которой журналы можно было архивировать во внешнюю БД. Теперь журналы могут храниться в основной или сателлитной БД.

NOTE: Функциональность очистки журналов с возможностью сохранения резервных копий не затронута.

Если функция архивирования применялась с целью снятия нагрузки с основной БД {dv}, воспользуйтесь альтернативным решением: используйте для хранения журналов xref:dev@platform:console:db-satellite.adoc[сателлитную БД]. При этом можно отключить периодическую очистку журналов (настройка menu:Журнал[Настройка бэкапа логов]).

.Параметры резервного копирования/очистки журналов
image::platform:common:log-backup.png[Параметры резервного копирования/очистки журналов]

[#components]
== Обновление компонентов собственных библиотек карточек

В новой версии модуля {pl} изменился механизм проверки соответствия клиентских компонентов библиотек карточек (см. список изменений модуля {pl} версии 5.5.2).

.Если в решении на базе {dv} реализованы собственные библиотеки карточек:
. Подключите новые сборки {dv} к проекту компонента.
. Добавьте в ресурсы XML-файл с описанием библиотеки карточек.
. В реализацию класса `CardLibrary` -- если .NET-сборка -- добавить переопределение метода `GetLibraryDefinition`. Метод должен возвращать описание библиотеки карточек.
+
[source,csharp]
----
protected override string GetLibraryDefinition()
{
  return Resources.CardLibDefinition;
}
----
+
. Повторно соберите, протестируйте работоспособность и распространите клиентский компонент библиотеки карточек.
+
.Для С++ реализации клиентского компонента библиотеки карточек нужно:
* Поддержать интерфейс `ICardLibraryInfo2`;
* Изменить поведение свойства `ICardLibraryInfo.Version`.
+
См. подробнее в руководстве разработчика, раздел "xref:programmer:samples:solution/snap-in/new-snap-in.adoc[]").

// tag::console[]
[#console]
== Установка Консоли управления {dv}

Чтобы настроить модуль _Служба {ws}_, установите модуль "{mc}" по инструкции в разделе установки модуля: "xref:5.5.1@mgmtconsole:admin:install.adoc[]".

{mc} позволяет настроить обязательный модуль _Служба {ws}_. Без данной настройки:

* Не будут создаваться и отправляться группы заданий.
* Не будут отправляться почтовые уведомления исполнителям.
// end::console[]
//end::noattr[]
