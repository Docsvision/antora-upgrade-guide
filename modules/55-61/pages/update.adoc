= Установка обновлений

[#preconfig]
== Выполните предварительную настройку

// . Устанавливать обновление рекомендуется на отдельную машину во избежание случаев, когда остаются старые файлы и папки системы.
// +
. Ознакомьтесь с условиями обновления.
+
* Условия обновления описаны в разделе "xref:conditions.adoc[]".
+
. Установите серверные компоненты модуля _{pl}_ сперва на сервер Linux, а затем на машину с ОС Windows:
+
NOTE: Если комплект обновления содержит обновление для модуля {pl}, всегда устанавливайте его первым.
+
* Установка описана в документации модуля платформа, раздел "xref:dev@platform:admin:install-platform.adoc[]".
+
. Установите серверные компоненты модулей на сервер Linux, а затем на Windows.
+
include::dev@install-linux::partial$limitation.adoc[]
+
* Установка серверных компонентов на Linux описана в руководстве по установке системы, раздел xref:dev@install-linux::install-other-linux.adoc[].
* Установка серверных компонентов на Windows описана там же, раздел xref:dev@install-linux::install-other-windows.adoc[].
+
. Выполните настройку системы из программы {cns} в ОС Windows.
+
* Инструкция по настройке приведена ниже.

[#console]
== Запустите {cns}

NOTE: При необходимости ознакомьтесь с разделом "xref:dev@platform:console:db-connect.adoc[]" в документации модуля {pl}.

. Подключите существующую БД {dv} с помощью программы _{cns}_ на машине с ОС Windows.
+
Пользователь, от имени которого запускается {cns} должен являться администратором {dv}, а также входить в группы {dv} в Справочнике сотрудников: _{dv-dm-admins-dir}_, _{dv-ad-admins-dir}_ и _{dv-sys-wf-dir}_.
+
. Откройте _{cns}_. В окне Консоли настройки перейдите в раздел _Базы данных_ и запустите *Мастер баз данных*.
+
. Нажимая кнопку *Далее*, дойдите до страницы _Базы данных_.
+
.Страница "Базы данных" мастера настройки {dv}
image::update-db.png[Страница "Базы данных" мастра настройки {dv}]
+
. Укажите данные для подключения к СУБД. Нажмите *Далее*.
+
Поддерживается обновление БД с версии {dv} 5.4. При обновлении выполните инструкцию из раздела xref:54-55:uninstall-current.adoc[].
+
.Мастер БД {dv} в режиме подключения базы данных
image::dev@platform:admin:db-create-start.png[Мастер БД {dv} в режиме подключения базы данных]
+
. На следующей странице не изменяйте выбор обновляемых библиотек карточек. Нажмите *Далее*.
+
.Обновление баз данных
image::update-card-lib.png[Обновление баз данных]
+
Дождитесь завершения загрузки SQL объектов. Процесс обновления может занять длительное время.
+
. На сервере Linux, в конфигурационном файле модулей укажите псевдоним и строку подключения к существующей БД в конфигурационном файле модуля {pl} и перезапустите службу *{sss-new}* командой:
+
[source,bash]
----
sudo systemctl restart dvappserver
----
+
. Выберите модули {dv}, настройки которых должны быть загружены в БД.
+
.Шаг загрузки настроек модулей
image::dev@platform:admin:db-create-modules.png[Шаг загрузки настроек модулей]
+
Следующие действия приведут к загрузке стандартных настроек приложения _{dm}_ и модуля _{ad}_. Все изменения, внесённые в стандартные настройки приложений (изменения настроек, разметок и др. стандартных видов карточек, стандартных шаблонов и т.д.), будут приведены к исходному виду.
+
Данное замечание не распространяется на собственные виды карточек, унаследованные от стандартных, а также на иные элементы, которые были добавлены при настройке Решения.
+
. Аналогичным образом обновите модули на узлах кластера {dv}, СУБП и {wc}а. Обновлять БД повторно не нужно.
// [WARNING]
// ====
// include::webclient:admin:partial$excerpts.adoc[tags=nonoyet]
// ====

[#client]
== Обновление клиентских компонентов

Если требуется, установите {wincl} на клиентские машины с ОС Windows.

* Установка {wincl}а описана в документации модуля {wincl}, раздел xref:dev@winclient:admin:install.adoc[].

Клиентские компоненты модулей на компьютерах пользователей будут обновлены автоматически после запуска {wincl}а. Также новые версии можно установить вручную из предоставляемых пакетов установки. Новые версии модулей будут установлены с областью установки модуля {pl}.

// Если клиентские компоненты модулей установлены на компьютере с сервером {dv}, их нужно обновить вручную из предоставляемых пакетов установки. При этом модули будут установлены с областью установки "для всех пользователей".

// Если клиентская часть модуля {pl} на сервере установлена с областью установки "для текущего пользователя", *самостоятельно удалите все клиентские компоненты старой версии* до установки новой, в ином случае в ОС будут параллельно существовать старая и новая версии.
